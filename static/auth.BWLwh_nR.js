import{z as s,A as n}from"./index-DjgUAJ8w.js";import{l as r,r as o}from"./api.BPvK5VrC.js";function e(s,r){n("token",s),r&&n("refreshToken",r)}function a(s){n("userInfo",s)}function c(){return!!s("token")}async function t(s){try{const n=await o(s);return n&&n.accessToken&&(e(n.accessToken,null),n.user&&a(n.user)),n}catch(n){throw console.error("注册失败:",n),n}}async function u(s,n){try{const o=await r({email:s,password:n});return o&&o.accessToken&&(e(o.accessToken,null),o.user&&a(o.user)),o}catch(o){throw console.error("登录失败:",o),o}}export{t as a,u as h,c as i};
