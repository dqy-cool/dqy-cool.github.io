import{r as e,c as l,a,w as s,i as t,o as u,b as o,d as c,e as i,f as n,n as d,I as r,t as p,s as v,g as f,h as m,j as _}from"./index-DjgUAJ8w.js";import{h as g,a as h}from"./auth.BWLwh_nR.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./api.BPvK5VrC.js";const w=k({__name:"login",setup(k){const w=e("login"),x=e(""),b=e(""),y=e(""),V=e(!1),j=e(!1),C=e(!1),U=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,I=l(()=>{const e=U.test(x.value),l=b.value.length>=8;return e&&l&&j.value}),T=()=>{j.value=!j.value},$=async()=>{if(I.value){if(!C.value)try{C.value=!0,f({title:"login"===w.value?"ç™»å½•ä¸­...":"æ³¨å†Œä¸­..."}),"login"===w.value?(await g(x.value,b.value),v({title:"ç™»å½•æˆåŠŸ",icon:"success",duration:1500})):(await h({email:x.value,password:b.value,nickname:y.value||void 0}),v({title:"æ³¨å†ŒæˆåŠŸ",icon:"success",duration:1500})),m(),setTimeout(()=>{_({url:"/pages/index/index",fail:e=>{console.error("è·³è½¬å¤±è´¥:",e),v({title:"ç™»å½•æˆåŠŸï¼Œè¯·æ‰‹åŠ¨è¿”å›",icon:"success"})}})},500)}catch(e){m(),console.error(("login"===w.value?"ç™»å½•":"æ³¨å†Œ")+"å¤±è´¥:",e)}finally{C.value=!1}}else j.value?U.test(x.value)?b.value.length<8&&v({title:"å¯†ç é•¿åº¦è‡³å°‘ä¸º8ä½",icon:"none"}):v({title:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼",icon:"none"}):v({title:"è¯·å…ˆåŒæ„ç”¨æˆ·åè®®",icon:"none"})};return(e,l)=>{const v=t,f=c,m=r;return u(),a(v,{class:"login-container"},{default:s(()=>[o(v,{class:"background-gradient"}),o(v,{class:"content-wrapper"},{default:s(()=>[o(v,{class:"title-section"},{default:s(()=>[o(f,{class:"main-title"},{default:s(()=>[i("è®°å½•ä½ çš„ç²¾å½©ä¸€æ†")]),_:1}),o(f,{class:"subtitle"},{default:s(()=>[i("ä¸€é”®è·å–ç²¾å½©ç¬é—´")]),_:1})]),_:1}),o(v,{class:"form-section"},{default:s(()=>[o(v,{class:"mode-switch"},{default:s(()=>[o(v,{class:d(["mode-item",{active:"login"===w.value}]),onClick:l[0]||(l[0]=e=>w.value="login")},{default:s(()=>[i(" ç™»å½• ")]),_:1},8,["class"]),o(v,{class:d(["mode-item",{active:"register"===w.value}]),onClick:l[1]||(l[1]=e=>w.value="register")},{default:s(()=>[i(" æ³¨å†Œ ")]),_:1},8,["class"])]),_:1}),o(v,{class:"input-wrapper"},{default:s(()=>[o(m,{class:"input-field",type:"text",modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value=e),placeholder:"è¯·è¾“å…¥é‚®ç®±","placeholder-class":"input-placeholder"},null,8,["modelValue"])]),_:1}),o(v,{class:"input-wrapper"},{default:s(()=>[o(m,{class:"input-field",type:V.value?"text":"password",modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=e=>b.value=e),placeholder:"è¯·è¾“å…¥å¯†ç ï¼ˆè‡³å°‘8ä½ï¼‰","placeholder-class":"input-placeholder"},null,8,["type","modelValue"]),o(v,{class:"password-toggle",onClick:l[4]||(l[4]=e=>V.value=!V.value)},{default:s(()=>[o(f,{class:"toggle-icon"},{default:s(()=>[i(p(V.value?"ğŸ‘ï¸":"ğŸ‘ï¸â€ğŸ—¨ï¸"),1)]),_:1})]),_:1})]),_:1}),"register"===w.value?(u(),a(v,{key:0,class:"input-wrapper"},{default:s(()=>[o(m,{class:"input-field",type:"text",modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=e=>y.value=e),placeholder:"è¯·è¾“å…¥æ˜µç§°ï¼ˆå¯é€‰ï¼‰","placeholder-class":"input-placeholder"},null,8,["modelValue"])]),_:1})):n("",!0),o(v,{class:d(["login-btn",{disabled:!I.value}]),onClick:$},{default:s(()=>[i(p("login"===w.value?"ç™»å½•":"æ³¨å†Œ"),1)]),_:1},8,["class"])]),_:1}),o(v,{class:"bottom-section"},{default:s(()=>[o(v,{class:"agreement-wrapper"},{default:s(()=>[o(v,{class:d(["checkbox",{checked:j.value}]),onClick:T},{default:s(()=>[j.value?(u(),a(f,{key:0,class:"check-icon"},{default:s(()=>[i("âœ“")]),_:1})):n("",!0)]),_:1},8,["class"]),o(f,{class:"agreement-text"},{default:s(()=>[i(" æˆ‘å·²é˜…è¯»å¹¶åŒæ„ "),o(f,{class:"link-text"},{default:s(()=>[i("ã€Šç”¨æˆ·åè®®ã€‹")]),_:1}),i(" å’Œ "),o(f,{class:"link-text"},{default:s(()=>[i("ã€Šéšç§æ”¿ç­–ã€‹")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-67ba0274"]]);export{w as default};
