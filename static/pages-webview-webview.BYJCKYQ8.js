import{P as e,Q as a,R as s,T as l,U as o,r as t,V as n,a as r,w as i,i as u,o as c,f as d,b as v,d as p,e as g,W as w,s as b,x as f}from"./index-DjgUAJ8w.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const _=(s,l=0)=>(l,t=e())=>{!o&&a(s,l,t)},m=_(s,3),h=_(l,2),j=x({__name:"webview",setup(e){const a=t(""),s=t(!0),l=t("");h(e=>{if(console.log("Webview 页面参数:",e),e.url)a.value=decodeURIComponent(e.url);else if(e.path){const s=e.baseUrl||"https://xdlujxwaraxm.sealosbja.site";a.value=`${s}${e.path}`}else a.value="https://xdlujxwaraxm.sealosbja.site";e.title&&(l.value=decodeURIComponent(e.title),n({title:l.value})),console.log("Webview URL:",a.value)});const o=e=>{console.log("Webview 加载完成:",e),s.value=!1},x=e=>{console.error("Webview 加载错误:",e),s.value=!1,b({title:"页面加载失败",icon:"none",duration:2e3})},_=e=>{var a;console.log("收到 Webview 消息:",e);((null==(a=e.detail)?void 0:a.data)||[]).forEach(e=>{"navigate"===e.type?e.url&&f({url:e.url}):"login"===e.type?f({url:"/pages/login/login"}):e.type})};return m(()=>{}),(e,l)=>{const t=p,n=u,b=w;return c(),r(n,{class:"webview-container"},{default:i(()=>[s.value?(c(),r(n,{key:0,class:"loading-wrapper"},{default:i(()=>[v(t,{class:"loading-text"},{default:i(()=>[g("加载中...")]),_:1})]),_:1})):d("",!0),v(b,{src:a.value,onMessage:_,onError:x,onLoad:o},null,8,["src"])]),_:1})}}},[["__scopeId","data-v-bf9341de"]]);export{j as default};
